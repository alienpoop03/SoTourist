<ion-header>
  <ion-toolbar>
    <ion-title>Crea il tuo viaggio</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="crea-content ion-padding">

  <!-- STEP 1: Tipo viaggio -->
  <div *ngIf="step === 1" class="step">
    <h2>Hai già iniziato il viaggio?</h2>
    <div class="option-cards">
      <div
        class="option-card"
        [class.selected]="tripType === 'inizio'"
        (click)="tripType = 'inizio'"
      >Già in viaggio</div>
      <div
        class="option-card"
        [class.selected]="tripType === 'pianificazione'"
        (click)="tripType = 'pianificazione'"
      >In pianificazione</div>
    </div>
    <ion-button expand="block" [disabled]="!tripType" (click)="nextStep()">
      Avanti
    </ion-button>
  </div>

  <!-- STEP 2: Città con Autocomplete -->
  <div *ngIf="step === 2" class="step">
    <h2>Dove ti trovi?</h2>
    <ion-item>
      <ion-input
        id="cityInput"
        [(ngModel)]="city"
        placeholder="Inserisci città..."
        clearInput
      ></ion-input>
    </ion-item>
    <ion-button expand="block" [disabled]="!city" (click)="nextStep()">
      Avanti
    </ion-button>
  </div>

  <!-- STEP 3: Data fine -->
  <div *ngIf="step === 3" class="step">
    <h2>Seleziona la data di fine vacanza</h2>
    <ion-datetime
      presentation="date"
      [(ngModel)]="endDate"
      [min]="startDate"
      locale="it-IT"
    ></ion-datetime>
    <ion-button expand="block" [disabled]="!endDate" (click)="nextStep()">
      Avanti
    </ion-button>
  </div>

  <!-- STEP 4: Riepilogo -->
  <div *ngIf="step === 4" class="step">
    <h2>Riepilogo</h2>
    <p><strong>Tipo viaggio:</strong>
      {{ tripType === 'inizio' ? 'Già iniziato' : 'In pianificazione' }}
    </p>
    <p><strong>Città:</strong> {{ city }}</p>
    <p><strong>Dal:</strong> {{ startDate | date:'dd/MM/yyyy' }}</p>
    <p><strong>Al:</strong> {{ endDate | date:'dd/MM/yyyy' }}</p>
    <p><strong>Durata:</strong> {{ getDurationDays() }} giorni</p>
    <ion-button expand="block" (click)="createTrip()">
      Crea viaggio
    </ion-button>
  </div>

</ion-content>
