<app-header [title]="'NiceTits'" [iconName]="'home-outline'" [showBackButton]="false">
</app-header>

<ion-content class="home-content" fullscreen>

  <!-- ───── HERO / ULTIMO VIAGGIO ───── -->
  <div *ngIf="lastTrip" class="hero" [ngStyle]="{'background-image': 'url(' + lastTrip.photo + ')'}">
    <div class="hero-overlay">
      <h2>{{ lastTrip.city }}</h2>
      <p>{{ lastTrip.start | date:'dd MMM' }} → {{ lastTrip.end | date:'dd MMM y' }}</p>
      <ion-button size="small" color="light" (click)="openItinerary(0)">
        Riprendi itinerario
        <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
      </ion-button>
    </div>
  </div>



  <!-- ───── DESTINAZIONI IMPERDIBILI ───── -->
  <ion-list class="dest-list">
    <ion-list-header>Destinazioni imperdibili</ion-list-header>

    <div class="dest-grid">
      <ion-card *ngFor="let city of suggestedCities" (click)="openCreate(city.name)">
        <img [src]="city.photo" alt="{{ city.name }}">
        <ion-card-header>
          <ion-card-title>{{ city.name }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <ion-button fill="clear" size="small">Aggiungi <ion-icon slot="end"
              name="add-outline"></ion-icon></ion-button>
        </ion-card-content>
      </ion-card>
    </div>
  </ion-list>

  <!-- ───── PIÙ VISITATI QUESTA SETTIMANA ───── -->
  <ion-list class="trend-list">
    <ion-list-header>I più visitati questa settimana</ion-list-header>

    <div class="trend-scroll">
      <ion-card *ngFor="let t of trending">
        <img [src]="t.photo" alt="{{ t.city }}">
        <div class="trend-label">
          <ion-icon name="trending-up-outline"></ion-icon>&nbsp;{{ t.count }}
        </div>
        <ion-card-content>{{ t.city }}</ion-card-content>
      </ion-card>
    </div>

  </ion-list>

  <!-- ───── I TUOI VIAGGI ───── -->
  <ion-list *ngIf="trips.length" lines="none" class="my-trips">
    <ion-list-header>Storico viaggi</ion-list-header>

    <app-trip-card *ngFor="let trip of trips"
      [trip]="trip"
      (remove)="deleteTrip($event)"
      (open)="openItinerary($event)">
    </app-trip-card>

  </ion-list>

</ion-content>

<!-- FAB CREA -->
<ion-fab slot="fixed" vertical="bottom" horizontal="end" class="custom-fab">
  <ion-fab-button (click)="goToCreate()">
    <ion-icon name="add-outline"></ion-icon>
  </ion-fab-button>
</ion-fab>